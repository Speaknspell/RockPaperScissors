<!DOCTYPE html>
<html>

<head>
    <title>Page Title</title>
</head>

<body>
    <h1> poopy</h1>

    <button onclick="game()">Select your move</button>


    <script>
        {
            let moves = ["rock", "scissors", "paper"];
            const compSelection = computerPlay();
            let playSelection = "";
            let gameLength = 5;

            let playerScore = 0;
            let compScore = 0;

            function SetPlayerChoice()
            {
                playSelection = prompt("Please enter your move", "Rock");
                playSelection = playSelection.toLowerCase();
                if (playSelection == "rock" | playSelection == "paper" | playSelection == "scissors") {
                    let x = convertToMove(playSelection);
                    playRound(x, compSelection);
                } else {
                    SetPlayerChoice();
                }

            }



            function convertToMove(playerSelection)
            {
                isPlayerSelection = (element) => element == playerSelection;

                console.log(moves.findIndex(isPlayerSelection));
                return moves.findIndex(isPlayerSelection);
            }

            function computerPlay()
            {
                return Math.floor(Math.random() * moves.length);

            }

            function playRound(playerSelection, computerSelection)
            {
                let gameString = "";
                if (playerSelection == computerSelection) {
                    gameString += "It is a tie!";
                }
                else if ((computerSelection == playerSelection + 1) || (computerSelection == playSelection - 2)) {
                    gameString += "Player Wins! " + moves[playerSelection] + " beats " + moves[compSelection];
                    playerScore += 1;
                }
                else {
                    gameString += "Computer Wins! " + moves[playerSelection] + " beats " + moves[compSelection];
                    compScore += 1;
                }

                console.log(gameString);
                console.log("player " + playerSelection)
                console.log(compSelection);
                return gameString;
            }

            function game()
            {
                let i = 0;
                for(i = 0; i<gameLength;i++)
                {
                    SetPlayerChoice();
                }
                if(playerScore == compScore){
                    console.log("It's a draw");
                }
                else if (playerScore > compScore){
                    console.log("Player wins "+ playerScore + " to " + compScore);
                }
                else{
                    console.log("Computer wins "+ compScore + " to " + playerScore);
                }
                
            }
        }

    </script>
</body>

</html>